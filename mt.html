<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Card Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            box-sizing: border-box;
        }

        .card-container {
            perspective: 1000px;
        }

        .card {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .card-front {
            transform: rotateY(180deg);
        }

        .card.matched {
            animation: matchPulse 0.5s ease;
        }

        @keyframes matchPulse {
            0%, 100% { transform: rotateY(180deg) scale(1); }
            50% { transform: rotateY(180deg) scale(1.1); }
        }

        /* Theme Colors */
        .theme-nature {
            --bg-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --card-back: #166534;
            --card-back-pattern: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px);
        }

        .theme-ocean {
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-back: #1e40af;
            --card-back-pattern: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.1) 0%, transparent 50%);
        }

        .theme-sunset {
            --bg-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --card-back: #be185d;
            --card-back-pattern: linear-gradient(135deg, rgba(255,255,255,0.1) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.1) 75%, transparent 75%);
        }

        .theme-galaxy {
            --bg-gradient: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            --card-back: #4c1d95;
            --card-back-pattern: radial-gradient(circle, rgba(255,255,255,0.15) 1px, transparent 1px);
        }

        .theme-fire {
            --bg-gradient: linear-gradient(135deg, #f12711 0%, #f5af19 100%);
            --card-back: #c2410c;
            --card-back-pattern: repeating-linear-gradient(0deg, transparent, transparent 15px, rgba(255,255,255,0.1) 15px, rgba(255,255,255,0.1) 30px);
        }

        .game-container {
            background: var(--bg-gradient);
        }

        .card-back {
            background-color: var(--card-back);
            background-image: var(--card-back-pattern);
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            top: -10px;
            animation: confettiFall 3s ease-out forwards;
        }

        @keyframes confettiFall {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
    </style>
</head>
<body class="min-h-screen theme-nature game-container transition-all duration-500">
    <div class="container mx-auto px-4 py-6 min-h-screen flex flex-col">
        <!-- Header -->
        <header class="text-center mb-6">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg">üß† Memory Game</h1>
            <p class="text-white/80 text-lg">Find all matching pairs!</p>
        </header>

        <!-- Stats Bar -->
        <div class="flex flex-wrap justify-center gap-4 mb-6">
            <div class="bg-white/20 backdrop-blur-sm rounded-xl px-6 py-3 text-white">
                <div class="text-sm opacity-80">Moves</div>
                <div id="moveCounter" class="text-2xl font-bold">0</div>
            </div>
            <div class="bg-white/20 backdrop-blur-sm rounded-xl px-6 py-3 text-white">
                <div class="text-sm opacity-80">Time</div>
                <div id="timer" class="text-2xl font-bold">00:00</div>
            </div>
            <div class="bg-white/20 backdrop-blur-sm rounded-xl px-6 py-3 text-white">
                <div class="text-sm opacity-80">Pairs</div>
                <div id="pairCounter" class="text-2xl font-bold">0/8</div>
            </div>
        </div>

        <!-- Theme Selector -->
        <div class="flex flex-wrap justify-center gap-3 mb-6">
            <button onclick="setTheme('nature')" class="theme-btn w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-emerald-400 border-2 border-white/50 hover:scale-110 transition-transform" title="Nature"></button>
            <button onclick="setTheme('ocean')" class="theme-btn w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 border-2 border-white/50 hover:scale-110 transition-transform" title="Ocean"></button>
            <button onclick="setTheme('sunset')" class="theme-btn w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-rose-500 border-2 border-white/50 hover:scale-110 transition-transform" title="Sunset"></button>
            <button onclick="setTheme('galaxy')" class="theme-btn w-10 h-10 rounded-full bg-gradient-to-br from-slate-800 to-violet-700 border-2 border-white/50 hover:scale-110 transition-transform" title="Galaxy"></button>
            <button onclick="setTheme('fire')" class="theme-btn w-10 h-10 rounded-full bg-gradient-to-br from-red-500 to-orange-400 border-2 border-white/50 hover:scale-110 transition-transform" title="Fire"></button>
        </div>

        <!-- Game Board -->
        <div class="flex-1 flex items-center justify-center">
            <div id="gameBoard" class="grid grid-cols-4 gap-3 md:gap-4 max-w-lg w-full mx-auto p-4">
                <!-- Cards will be generated here -->
            </div>
        </div>

        <!-- Control Buttons -->
        <div class="flex justify-center gap-4 mt-6 mb-4">
            <button onclick="restartGame()" class="bg-white text-gray-800 font-bold py-3 px-8 rounded-xl shadow-lg hover:bg-gray-100 hover:scale-105 transition-all">
                üîÑ Restart
            </button>
            <button onclick="togglePause()" id="pauseBtn" class="bg-white/30 text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:bg-white/40 hover:scale-105 transition-all">
                ‚è∏Ô∏è Pause
            </button>
        </div>

        <!-- Best Score -->
        <div class="text-center text-white/70">
            <span>Best Score: </span>
            <span id="bestScore">--</span>
            <span class="text-sm">(moves)</span>
        </div>
    </div>

    <!-- Win Modal -->
    <div id="winModal" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-3xl p-8 max-w-md mx-4 text-center transform scale-95 animate-bounce">
            <div class="text-6xl mb-4">üéâ</div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">You Won!</h2>
            <p class="text-gray-600 mb-6">Congratulations on completing the puzzle!</p>
            
            <div class="flex justify-center gap-6 mb-6">
                <div class="bg-gray-100 rounded-xl p-4">
                    <div class="text-3xl font-bold text-purple-600" id="finalMoves">0</div>
                    <div class="text-sm text-gray-500">Moves</div>
                </div>
                <div class="bg-gray-100 rounded-xl p-4">
                    <div class="text-3xl font-bold text-purple-600" id="finalTime">00:00</div>
                    <div class="text-sm text-gray-500">Time</div>
                </div>
            </div>

            <div id="newRecordBadge" class="hidden bg-yellow-400 text-yellow-900 font-bold py-2 px-4 rounded-full mb-4 inline-block">
                üèÜ New Record!
            </div>

            <div class="flex gap-4 justify-center">
                <button onclick="closeModal()" class="bg-gray-200 text-gray-700 font-bold py-3 px-6 rounded-xl hover:bg-gray-300 transition-colors">
                    Close
                </button>
                <button onclick="playAgain()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 px-6 rounded-xl hover:scale-105 transition-transform">
                    Play Again üéÆ
                </button>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let cards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let moves = 0;
        let gameStarted = false;
        let timerInterval = null;
        let seconds = 0;
        let isLocked = false;
        let isPaused = false;

        // Card symbols for different themes
        const themes = {
            nature: ['üå≤', 'üå∫', 'ü¶ã', 'üçÑ', 'üåª', 'üêøÔ∏è', 'üå∏', 'üåø'],
            ocean: ['üê†', 'üêô', 'ü¶Ä', 'üê¨', 'ü¶ë', 'üê°', 'ü¶à', 'üêö'],
            sunset: ['üåÖ', 'üî•', '‚≠ê', 'üåô', '‚òÅÔ∏è', 'üåà', '‚ö°', '‚ùÑÔ∏è'],
            galaxy: ['üåü', 'ü™ê', 'üåô', '‚òÄÔ∏è', '‚≠ê', 'üåç', 'üöÄ', 'üí´'],
            fire: ['üî•', 'üåã', '‚ö°', 'üí•', '‚òÄÔ∏è', 'üî∂', 'üéÜ', '‚ú®']
        };

        let currentTheme = 'nature';
        let bestScore = localStorage.getItem('memoryGameBest') || null;

        // Initialize game
        function initGame() {
            updateBestScoreDisplay();
            createBoard();
        }

        // Create game board
        function createBoard() {
            const board = document.getElementById('gameBoard');
            board.innerHTML = '';
            
            const symbols = themes[currentTheme];
            cards = [...symbols, ...symbols];
            shuffleArray(cards);

            cards.forEach((symbol, index) => {
                const cardContainer = document.createElement('div');
                cardContainer.className = 'card-container aspect-square';
                
                cardContainer.innerHTML = `
                    <div class="card cursor-pointer" data-index="${index}" data-symbol="${symbol}">
                        <div class="card-back shadow-lg border-2 border-white/30">
                            <span class="text-3xl">‚ùì</span>
                        </div>
                        <div class="card-front bg-white shadow-lg">
                            <span>${symbol}</span>
                        </div>
                    </div>
                `;

                cardContainer.addEventListener('click', () => flipCard(cardContainer.querySelector('.card')));
                board.appendChild(cardContainer);
            });
        }

        // Shuffle array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Flip card
        function flipCard(card) {
            if (isLocked || isPaused) return;
            if (card.classList.contains('flipped')) return;
            if (card.classList.contains('matched')) return;
            if (flippedCards.length >= 2) return;

            if (!gameStarted) {
                startTimer();
                gameStarted = true;
            }

            card.classList.add('flipped');
            flippedCards.push(card);

            if (flippedCards.length === 2) {
                moves++;
                updateMoveCounter();
                checkMatch();
            }
        }

        // Check for match
        function checkMatch() {
            const [card1, card2] = flippedCards;
            const match1 = card1.dataset.symbol;
            const match2 = card2.dataset.symbol;

            if (match1 === match2) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                matchedPairs++;
                updatePairCounter();
                flippedCards = [];

                if (matchedPairs === 8) {
                    setTimeout(showWinModal, 500);
                }
            } else {
                isLocked = true;
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    flippedCards = [];
                    isLocked = false;
                }, 1000);
            }
        }

        // Start timer
        function startTimer() {
            timerInterval = setInterval(() => {
                if (!isPaused) {
                    seconds++;
                    updateTimerDisplay();
                }
            }, 1000);
        }

        // Update timer display
        function updateTimerDisplay() {
            const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
            const secs = (seconds % 60).toString().padStart(2, '0');
            document.getElementById('timer').textContent = `${mins}:${secs}`;
        }

        // Update move counter
        function updateMoveCounter() {
            document.getElementById('moveCounter').textContent = moves;
        }

        // Update pair counter
        function updatePairCounter() {
            document.getElementById('pairCounter').textContent = `${matchedPairs}/8`;
        }

        // Update best score display
        function updateBestScoreDisplay() {
            document.getElementById('bestScore').textContent = bestScore || '--';
        }

        // Set theme
        function setTheme(theme) {
            currentTheme = theme;
            document.body.className = `min-h-screen theme-${theme} game-container transition-all duration-500`;
            
            if (gameStarted) {
                const confirmed = confirm('Changing theme will restart the game. Continue?');
                if (confirmed) {
                    restartGame();
                }
            }
        }

        // Restart game
        function restartGame() {
            clearInterval(timerInterval);
            timerInterval = null;
            seconds = 0;
            moves = 0;
            matchedPairs = 0;
            flippedCards = [];
            gameStarted = false;
            isLocked = false;
            isPaused = false;

            updateTimerDisplay();
            updateMoveCounter();
            updatePairCounter();
            
            document.getElementById('pauseBtn').innerHTML = '‚è∏Ô∏è Pause';
            document.getElementById('pauseBtn').classList.remove('bg-green-500');
            document.getElementById('pauseBtn').classList.add('bg-white/30');

            createBoard();
        }

        // Toggle pause
        function togglePause() {
            if (!gameStarted) return;
            
            isPaused = !isPaused;
            const btn = document.getElementById('pauseBtn');
            
            if (isPaused) {
                btn.innerHTML = '‚ñ∂Ô∏è Resume';
                btn.classList.remove('bg-white/30');
                btn.classList.add('bg-green-500');
            } else {
                btn.innerHTML = '‚è∏Ô∏è Pause';
                btn.classList.remove('bg-green-500');
                btn.classList.add('bg-white/30');
            }
        }

        // Show win modal
        function showWinModal() {
            clearInterval(timerInterval);
            
            const modal = document.getElementById('winModal');
            const finalMoves = document.getElementById('finalMoves');
            const finalTime = document.getElementById('finalTime');
            const newRecordBadge = document.getElementById('newRecordBadge');

            finalMoves.textContent = moves;
            finalTime.textContent = document.getElementById('timer').textContent;

            if (!bestScore || moves < bestScore) {
                bestScore = moves;
                localStorage.setItem('memoryGameBest', bestScore);
                updateBestScoreDisplay();
                newRecordBadge.classList.remove('hidden');
            } else {
                newRecordBadge.classList.add('hidden');
            }

            modal.classList.remove('hidden');
            createConfetti();
        }

        // Close modal
        function closeModal() {
            document.getElementById('winModal').classList.add('hidden');
        }

        // Play again
        function playAgain() {
            closeModal();
            restartGame();
        }

        // Create confetti
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ffa500', '#800080'];
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    document.body.appendChild(confetti);

                    setTimeout(() => confetti.remove(), 4000);
                }, i * 30);
            }
        }

        // Start the game
        initGame();
    </script>
</body>
</html>